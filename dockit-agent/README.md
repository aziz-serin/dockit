# Dockit Agent

## Background

This application serves as an agent which collects and sends data to ```dockit server```. If configured correctly,
it can collect desired data according to its configuration, format it in a way the server can understand, and send it to
the configured server.

## Configuration

### Environment

An environment variable is needed to read the specified configuration file. An example one is provided [here](/src/main/resources/config.properties),
but keep in mind that this application does not generate a default one, so it needs to be generated manually. To set the
environment variable, you can run:

```bash
export CONFIG_PATH=PATH_TO_YOUR_CONFIG
```

### Generating the Application Configuration

The application has namely 11 separate configuration parameters, these are:

```properties
interval=#interval to send the data to the server in seconds
docker=#if docker engine should be audited or not
vm_data=#if the host VM should be audited or not
rest_api=#if the REST interface should be enabled or not
secret_key=#secret key generated in server by the admin upon the creation of the agent entity
api_key=#api key generated by the server for the agent
id=#id generated in server by the admin upon the creation of the agent entity
zone_id=# Zone id for the virtual machine
docker_url=#url to query for the docker engine api
server_url=#url for the server to send the data to
vm_id=#some identifier for the audited virtual machine
```

```secret_key, api_key``` and ```id``` are generated using an admin account on the server side, and MUST correspond to an existing
agent in the server, otherwise sent data will not be received and processed by the server side. It is the admins responsibility
to get these parameters from the server and place them in the configuration of the agent before its deployment.

## Deployment

After the configuration of the agent, it can be compiled using the command

```bash
mvn clean install
```

and be deployed by running the command

```bash
mvn exec:java
```

## Development

### Documentation

The project uses the maven-javadoc plugin to generate a static javadoc site. The documentation for the application itself
and REST endpoints can all be found in the generated javadocs. To generate them, run:

```bash
mvn javadoc:javadoc
```

To view the documentation, you can run

```bash
open PATH_TO_TARGET/target/site/index.html
``` 